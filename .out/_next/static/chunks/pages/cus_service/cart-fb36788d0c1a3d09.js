(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{5212:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var o=r(n(4938)),i=n(5893);t.Z=(0,o.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"}),"IndeterminateCheckBox")},7691:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var o=r(n(4938)),i=n(5893);t.Z=(0,o.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4z"}),"LocalHospital")},4938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(1109)},1109:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return o.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return a.Z},debounce:function(){return c.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return s.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return p},setRef:function(){return f},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return h.Z},unstable_useId:function(){return g},unsupportedProp:function(){return x},useControlled:function(){return m.Z},useEventCallback:function(){return v.Z},useForkRef:function(){return Z.Z},useIsFocusVisible:function(){return b.Z}});var r=n(1983),o=n(8216),i=n(5725).Z,a=n(8169),c=n(7144),l=function(e,t){return()=>null},s=n(6476),u=n(8038),d=n(5340);n(7462);var p=function(e,t){return()=>null},f=n(5091).Z,h=n(8974),g=n(9326).Z,x=function(e,t,n,r,o){return null},m=n(7388),v=n(2068),Z=n(1705),b=n(9632);let y={configure:e=>{r.Z.configure(e)}}},2574:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cus_service/cart",function(){return n(4099)}])},4099:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(5893),o=n(7294),i=n(1163),a=n(5616),c=n(5861),l=n(4243),s=n(1903),u=n(3366),d=n(7462),p=n(512),f=n(8510),h=n(2101),g=n(948),x=n(1657),m=n(7739),v=n(8216),Z=n(1977),b=n(5463);function y(e){return(0,b.ZP)("MuiIconButton",e)}let j=(0,Z.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),I=["edge","children","className","color","disabled","disableFocusRipple","size"],S=e=>{let{classes:t,disabled:n,color:r,edge:o,size:i}=e,a={root:["root",n&&"disabled","default"!==r&&`color${(0,v.Z)(r)}`,o&&`edge${(0,v.Z)(o)}`,`size${(0,v.Z)(i)}`]};return(0,f.Z)(a,y,t)},w=(0,g.ZP)(m.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,v.Z)(n.color)}`],n.edge&&t[`edge${(0,v.Z)(n.edge)}`],t[`size${(0,v.Z)(n.size)}`]]}})(({theme:e,ownerState:t})=>(0,d.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,h.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12}),({theme:e,ownerState:t})=>{var n;let r=null==(n=(e.vars||e).palette)?void 0:n[t.color];return(0,d.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,d.Z)({color:null==r?void 0:r.main},!t.disableRipple&&{"&:hover":(0,d.Z)({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,h.Fq)(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${j.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),k=o.forwardRef(function(e,t){let n=(0,x.Z)({props:e,name:"MuiIconButton"}),{edge:o=!1,children:i,className:a,color:c="default",disabled:l=!1,disableFocusRipple:s=!1,size:f="medium"}=n,h=(0,u.Z)(n,I),g=(0,d.Z)({},n,{edge:o,color:c,disabled:l,disableFocusRipple:s,size:f}),m=S(g);return(0,r.jsx)(w,(0,d.Z)({className:(0,p.Z)(m.root,a),centerRipple:!0,focusRipple:!s,disabled:l,ref:t},h,{ownerState:g,children:i}))});var C=n(9417),z=n(7691),_=n(5212),N=n(3977),R=n(9828),q=()=>{let e;let[t,n]=(0,o.useState)(!1);try{e=(0,N.Mq)()}catch(t){e=(0,N.ZF)({apiKey:"AIzaSyAKE4ePUsVfXd8Nh7Bj9msbroBd_7tvbzg",authDomain:"tableorder-90826.firebaseapp.com",projectId:"tableorder-90826",storageBucket:"tableorder-90826.appspot.com",messagingSenderId:"723306684078",appId:"1:723306684078:web:ca7f0fcc45dbc2ec02173f",measurementId:"G-QSTWZS9F78"})}let u=(0,R.ad)(e),d=(0,i.useRouter)(),[p,f]=(0,o.useState)(""),[h,g]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=localStorage.getItem("cartItems");e&&g(JSON.parse(e))},[]);let[x,m]=(0,o.useState)(!1),[v,Z]=(0,o.useState)(!1),b=e=>{let t=[...h];t[e].quantity++,g(t),localStorage.setItem("cartItems",JSON.stringify(t))},y=e=>{let t=[...h];t[e].quantity>0&&(t[e].quantity--,g(t),localStorage.removeItem("cartItems")),0===t[e].quantity&&(t.splice(e,1),g(t),localStorage.setItem("cartItems",JSON.stringify(t)))},j=()=>{let e=0;return h.forEach(t=>{e+=t.quantity*t.price}),e},I=e=>{f(e.target.value)},S=j(),w=new Date,q=w.getDate(),E=w.getMonth()+1,P=w.getFullYear(),O=w.getHours(),T=w.getMinutes(),M=w.getSeconds(),F="".concat(q,"/").concat(E,"/").concat(P," ").concat(O,":").concat(T,":").concat(M),$=async()=>{let e=await Promise.all(h.map(async e=>{var t;let n=(0,R.JU)(u,"Menus",e.id),r=(null===(t=(await (0,R.QT)(n)).data())||void 0===t?void 0:t.show)||!1;return{...e,show:r}})),t=e.filter(e=>e.show&&e.id);localStorage.setItem("cartItems",JSON.stringify(t)),g(t),console.log(t);let r=e.filter(e=>!e.show);if(r.length>0){let e=r.map(e=>e.name).join(", ");alert("".concat(e," tạm dừng phục vụ. Vui l\xf2ng chọn m\xf3n kh\xe1c."));return}if(0===t.length){alert("Kh\xf4ng c\xf3 sản phẩm hợp lệ để gửi đơn h\xe0ng.");return}let o=(0,R.hJ)(u,"OrderDetails"),i="";if(t.length>0){let e=t.find(e=>void 0!==e.tableId&&null!==e.tableId);i=e?e.tableId:""}let a={paymentStatus:!1,tableId:i,totalPrice:S,date:F,items:t.map(e=>({menu_id:e.id,menu_name:e.name,quantity:e.quantity,note:e.note?e.note:p,orderdetails_price:e.quantity*e.price}))};n(!0),(0,R.ET)(o,a).then(()=>{g([]),localStorage.removeItem("cartItems")})},V=()=>{let e=d.query.tableId;d.push("/cus_service/menu?tableId=".concat(e))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{sx:{background:"#C50023",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,r.jsx)(c.Z,{sx:{color:"white",fontWeight:600},variant:"h5",children:"TH\xd4NG TIN ĐƠN H\xc0NG"})}),(0,r.jsx)(a.Z,{sx:{p:"20px 0px 0px 0px"},children:(0,r.jsx)(l.Z,{display:"flex",gap:"20px",children:h.map((e,t)=>(0,r.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",sx:{padding:"5px",backgroundColor:"#fff9c4",width:"99%",borderRadius:"16px"},children:[(0,r.jsx)(a.Z,{component:"img",src:"".concat(e.path),sx:{width:"60px",height:"60px",borderRadius:"16px"}}),(0,r.jsxs)(l.Z,{pl:"5px",children:[(0,r.jsx)(c.Z,{style:{fontSize:"13px",fontWeight:"bold"},children:e.name}),(0,r.jsxs)(l.Z,{direction:"row",children:[(0,r.jsx)(s.Z,{id:"standard-basic",label:"Ghi ch\xfa",value:p,onChange:I,onFocus:()=>Z(!0),onBlur:()=>Z(!1),variant:"standard",style:{fontSize:"10px",fontStyle:"italic"},sx:{width:"100%"},InputProps:{style:{fontSize:"15px",background:"transparent"}}}),(0,r.jsxs)(l.Z,{sx:{width:"100%"},children:[(0,r.jsxs)(c.Z,{style:{fontSize:"15px"},sx:{fontWeight:700,color:"red",textAlign:"right"},children:[(e.quantity*e.price).toLocaleString("vi-VN")," ","VND"]}),(0,r.jsxs)(l.Z,{sx:{justifyContent:"flex-end"},direction:"row",spacing:0,children:[(0,r.jsx)(k,{sx:{padding:"0"},onClick:()=>y(t),children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(s.Z,{value:e.quantity,variant:"standard",inputProps:{style:{textAlign:"center",maxWidth:"30px"}}}),(0,r.jsx)(k,{sx:{padding:"0"},onClick:()=>b(t),children:(0,r.jsx)(z.Z,{})})]})]})]})]})]},t))})}),t&&(0,r.jsxs)(a.Z,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 128, 0, 0.8)",color:"white",padding:"10px",width:"200px",height:"100px",borderRadius:"8px",zIndex:9999,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(c.Z,{children:"Chọn m\xf3n th\xe0nh c\xf4ng!"}),(0,r.jsx)(C.Z,{variant:"contained",onClick:()=>{n(!1),V()},style:{marginTop:"20px"},children:"Oke"})]}),(0,r.jsxs)(c.Z,{sx:{textAlign:"right",color:"#d50000",fontWeight:"bold",mt:"10px",mr:"5px"},children:["Tổng cộng: ",j().toLocaleString("vi-VN")," VND"]}),(0,r.jsx)(a.Z,{sx:{position:"fixed",bottom:x&&v?"100vh":0,left:0,right:0,padding:2,background:"#fff"},children:(0,r.jsxs)(l.Z,{spacing:1,children:[(0,r.jsx)(C.Z,{variant:"contained",style:{width:"100%",background:"#C50023",color:"#ffffff"},onClick:$,children:"Gửi đơn"}),(0,r.jsx)(C.Z,{variant:"contained",style:{width:"100%",background:"#ffffff",color:"gray"},onClick:V,children:"Tho\xe1t"})]})})]})}},1163:function(e,t,n){e.exports=n(3035)}},function(e){e.O(0,[16,474,945,903,787,888,774,179],function(){return e(e.s=2574)}),_N_E=e.O()}]);