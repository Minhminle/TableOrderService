(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{8473:function(t,e,n){"use strict";n.d(e,{ZP:function(){return s},_i:function(){return c},pQ:function(){return u},uU:function(){return o}});var r=n(7294),a=n(5893);let i=r.createContext(null);function s(t){let{children:e,value:n}=t,s=function(){let[t,e]=r.useState(null);return r.useEffect(()=>{e(`mui-p-${Math.round(1e5*Math.random())}`)},[]),t}(),c=r.useMemo(()=>({idPrefix:s,value:n}),[s,n]);return(0,a.jsx)(i.Provider,{value:c,children:e})}function c(){return r.useContext(i)}function o(t,e){let{idPrefix:n}=t;return null===n?null:`${t.idPrefix}-P-${e}`}function u(t,e){let{idPrefix:n}=t;return null===n?null:`${t.idPrefix}-T-${e}`}},5616:function(t,e,n){"use strict";n.d(e,{Z:function(){return Z}});var r=n(7462),a=n(3366),i=n(7294),s=n(512),c=n(3390),o=n(6523),u=n(9707),l=n(9718),d=n(5893);let h=["className","component"];var f=n(1983),m=n(1265),p=n(606);let x=(0,n(1977).Z)("MuiBox",["root"]),b=(0,m.Z)();var Z=function(t={}){let{themeId:e,defaultTheme:n,defaultClassName:f="MuiBox-root",generateClassName:m}=t,p=(0,c.default)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(o.Z);return i.forwardRef(function(t,i){let c=(0,l.Z)(n),o=(0,u.Z)(t),{className:x,component:b="div"}=o,Z=(0,a.Z)(o,h);return(0,d.jsx)(p,(0,r.Z)({as:b,ref:i,className:(0,s.Z)(x,m?m(f):f),theme:e&&c[e]||c},Z))})}({themeId:p.Z,defaultTheme:b,defaultClassName:x.root,generateClassName:f.Z.generate})},1703:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/kitchen",function(){return n(7436)}])},8134:function(t,e,n){"use strict";n.d(e,{q:function(){return r}});let r={apiKey:"AIzaSyAvG04eeCLcb6VBF7F61x7H-3zyTTBQfjM",authDomain:"tableorderservice.firebaseapp.com",projectId:"tableorderservice",storageBucket:"tableorderservice.appspot.com",messagingSenderId:"789767582873",appId:"1:789767582873:web:c0cc47801fff8ba1b8f408",measurementId:"G-25TT028B48"}},6887:function(t,e,n){"use strict";n.d(e,{Z:function(){return o},v:function(){return c}});var r=n(7294),a=n(3977),i=n(9828),s=n(8134);class c{constructor(t,e,n,r,a,i){this.id=t,this.name=e,this.price=n,this.path=r,this.type=a,this.show=i}}function o(){let[t,e]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let t=(0,a.ZF)(s.q),n=(0,i.ad)(t);(async()=>{try{let t=(0,i.hJ)(n,"Menus"),r=(await (0,i.PL)(t)).docs.map(t=>{let e=t.data();return new c(t.id,e.name,e.price,e.path,e.type,e.show)});e(r)}catch(t){console.error("Error fetching data: ",t)}})()},[]),t}},2850:function(t,e,n){"use strict";n.d(e,{P0:function(){return o},cn:function(){return u}});var r=n(7294),a=n(3977),i=n(9828),s=n(8134);class c{constructor(t,e,n,r,a="",i=!0){this.menu_id=t,this.menu_name=e,this.orderdetails_price=n,this.quantity=r,this.note=a,this.itemstatus=i}}class o{constructor(t,e,n,r,a){this.id=t,this.items=e,this.date=n,this.paymentStatus=r,this.totalPrice=a}}function u(t){let[e,n]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=(0,a.ZF)(s.q),r=(0,i.ad)(e),u=(0,i.hJ)(r,"OrderDetails"),l=(0,i.IO)(u,(0,i.ar)("tableId","==",t)),d=(0,i.cf)(l,t=>{let e=[];t.forEach(t=>{let n=t.data(),r=t.id,a=n.items.map(t=>new c(t.menu_id,t.menu_name,t.orderdetails_price,t.quantity));e.push(new o(r,a,n.date,n.paymentStatus,n.totalPrice))}),n(e)});return()=>d()},[t]),e}},353:function(t,e,n){"use strict";n.d(e,{$:function(){return u}});var r=n(7294),a=n(3977),i=n(9828),s=n(8134),c=n(2850);class o{constructor(t,e,n=!1){this.id=t,this.table_number=e,this.status=n}}function u(){let[t,e]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let t=(0,a.ZF)(s.q),n=(0,i.ad)(t);(async()=>{try{let t=(0,i.hJ)(n,"Tables"),r=await (0,i.PL)(t),a=[];for(let t of r.docs){let e=t.data(),n=new o(t.id,e.table_number,e.status);a.push(n)}for(let t of a){let e=(await l(n,t.id)).some(t=>!t.paymentStatus);await d(n,t.id,e),t.status=e}e(a)}catch(t){console.error("Error fetching data: ",t)}})()},[]),t}async function l(t,e){let n=(0,i.hJ)(t,"OrderDetails"),r=(0,i.IO)(n,(0,i.ar)("tableId","==",e)),a=await (0,i.PL)(r),s=[];return a.forEach(t=>{let e=t.data(),n=new c.P0(e.id,e.items,e.orderDate,e.paymentStatus,e.totalPrice);s.push(n)}),s}async function d(t,e,n){let r=(0,i.JU)(t,"Tables",e);await (0,i.r7)(r,{status:n})}},7436:function(t,e,n){"use strict";n.r(e);var r=n(5893),a=n(7294),i=n(353),s=n(5616),c=n(6886),o=n(9417),u=n(5861),l=n(8473),d=n(6887),h=n(2850);n(1540);var f=n(948),m=n(8102),p=n(9755),x=n(3816),b=n(295),Z=n(7906);e.default=()=>{let t=(0,i.$)(),[e,n]=(0,a.useState)(""),w=(0,h.cn)(e),y=(0,d.Z)(),[g,j]=(0,a.useState)(1),[v,P]=(0,a.useState)([]),[_,S]=(0,a.useState)(!1),[E,C]=(0,a.useState)([]),k=t=>{n(t)};(0,a.useEffect)(()=>{P(y);let t=y.map(t=>t.type);C(Array.from(new Set(t)))},[y]),(0,a.useEffect)(()=>{v.length>0&&S(!0)},[v]);let T=[...t].sort((t,e)=>t.table_number-e.table_number),B=(0,f.ZP)(m.Z)(t=>{let{theme:e}=t;return{["&.".concat(p.Z.head)]:{backgroundColor:e.palette.common.black,color:e.palette.common.white},["&.".concat(p.Z.body)]:{fontSize:14}}}),I=(0,f.ZP)(x.Z)(t=>{let{theme:e}=t;return{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}),N=[...w].sort((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime());return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.ZP,{value:g.toString(),children:[(0,r.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider",display:"flex",flexDirection:"column"},children:(0,r.jsx)(c.ZP,{container:!0,spacing:2,justifyContent:"center",children:T.map((t,e)=>(0,r.jsx)(c.ZP,{item:!0,style:{width:"20%"},children:(0,r.jsx)(o.Z,{value:t.id,onClick:()=>k(t.id),sx:{background:t.status?"blue":"white",color:t.status?"white":"black",width:"100%"},children:"B\xe0n số ".concat(t.table_number)})},t.id))})}),(0,r.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,r.jsx)(u.Z,{fontSize:"30px",fontWeight:"bolder",textAlign:"center",children:"Sản Phẩm"}),(0,r.jsx)(c.ZP,{container:!0,spacing:2,justifyContent:"center",children:N.map((t,e)=>(0,r.jsx)(c.ZP,{item:!0,style:{width:"600px"},children:(0,r.jsxs)(s.Z,{sx:{padding:"20px",border:"1px solid #ccc",borderRadius:"5px",marginTop:"10px"},children:[(0,r.jsx)(u.Z,{variant:"h6",sx:{marginBottom:"10px"},children:"OrderDetail #".concat(e+1)}),(0,r.jsx)(u.Z,{variant:"subtitle1",children:"Ng\xe0y: ".concat(t.date)}),(0,r.jsx)(Z.Z,{children:(0,r.jsx)(s.Z,{style:{marginBottom:"20px",overflowY:"auto",maxHeight:210},children:(0,r.jsx)(b.Z,{children:t.items.map((t,e)=>(0,r.jsxs)(I,{children:[(0,r.jsx)(B,{style:{width:400},children:t.menu_name}),(0,r.jsx)(B,{style:{width:100},children:t.quantity})]},e))})})})]})},e))})]})]})})}},1540:function(){}},function(t){t.O(0,[16,474,945,886,365,888,774,179],function(){return t(t.s=1703)}),_N_E=t.O()}]);