(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{8442:function(e,t,i){"use strict";function n(e){return"string"==typeof e}i.d(t,{X:function(){return n}})},9773:function(e,t,i){"use strict";let n=i(7294).createContext({});t.Z=n},6476:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(7294),r=function(e,t){var i,r;return n.isValidElement(e)&&-1!==t.indexOf(null!=(i=e.type.muiName)?i:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},8974:function(e,t,i){"use strict";var n=i(4895);t.Z=n.Z},6923:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cus_service/menu",function(){return i(4457)}])},4457:function(e,t,i){"use strict";i.r(t);var n=i(5893),r=i(7294),s=i(3977),a=i(1163),c=i(9828),o=i(5616),l=i(4243),p=i(5861),d=i(9417),x=i(6886),u=i(891);class h{constructor(e,t,i,n,r,s){this.id=e,this.name=t,this.price=i,this.path=n,this.type=r,this.show=s}}t.default=()=>{let[e,t]=(0,r.useState)([]),[i,m]=(0,r.useState)(!0),[f,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[y,Z]=(0,r.useState)([]),[S,w]=(0,r.useState)("All"),[I,v]=(0,r.useState)([]),[C,N]=(0,r.useState)(0),[k,E]=(0,r.useState)([]),_=(0,a.useRouter)(),P=_.query.tableId;Array.from(new Set(e.map(e=>e.type))).map(t=>e.filter(e=>0!==e.price&&!0===e.show&&e.type===t));let R={All:"Tất cả",Pickle:"Đồ chua - B\xe1nh m\xec",Beverages:"Nước ngọt - Tr\xe0",Beef:"B\xf2 nướng",Meat:"Heo - G\xe0 - Hải sản",Soda:"Soda m\xf9i",Vegetable:"Rau nướng",Hotpots:"Lẩu",Combo:"Combo Nướng & Lẩu",Sausace:"Sốt"},W=e=>R[e]||e;(0,r.useEffect)(()=>{let e=localStorage.getItem("cartItems");e&&v(JSON.parse(e))},[]);let A=e=>{b(!j),m(!1),g(!1),S||w(e)},H=()=>{m(!0),b(!1),g(!1)},O=t=>{Z(e.filter(e=>e.type===t)),m(!1),b(!1),g(!0),w(t)};(0,r.useEffect)(()=>{let e=(0,s.ZF)({apiKey:"AIzaSyAvG04eeCLcb6VBF7F61x7H-3zyTTBQfjM",authDomain:"tableorderservice.firebaseapp.com",projectId:"tableorderservice",storageBucket:"tableorderservice.appspot.com",messagingSenderId:"789767582873",appId:"1:789767582873:web:c0cc47801fff8ba1b8f408",measurementId:"G-25TT028B48"}),i=(0,c.ad)(e);(async()=>{try{let e=(0,c.hJ)(i,"Menus"),n=(await (0,c.PL)(e)).docs.map(e=>{let t=e.data();return new h(e.id,t.name,t.price,t.path,t.type,t.show)});t(n)}catch(e){console.error("Error fetching data: ",e)}})()},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("cartItems");e&&v(JSON.parse(e))},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("cartItems");if(e){let t=JSON.parse(e);v(t),Array.isArray(t)&&E(t.map(e=>e.id))}},[]);let T=t=>{let i=e.find(e=>e.id===t);if(i){if(!i.show){alert("".concat(i.name," đ\xe3 dừng phục vụ."));return}if(-1===I.findIndex(e=>e.id===t)){let e=[...I,{id:i.id,name:i.name,price:i.price,path:i.path,type:i.type,tableId:P,show:i.show,quantity:1}];v(e),E(e=>[...e,t]),localStorage.setItem("cartItems",JSON.stringify(e))}else if(k.includes(t)){let e=I.filter(e=>e.id!==t);v(e),E(e=>e.filter(e=>e!==t)),localStorage.setItem("cartItems",JSON.stringify(e))}else{let e=I.map(e=>e.id===t?{...e,quantity:e.quantity+1}:e);v(e),E(e=>[...e,t]),localStorage.setItem("cartItems",JSON.stringify(e))}}else console.error("Menu item not found!")};return(0,r.useEffect)(()=>{N(I.filter(t=>{var i;return null===(i=e.find(e=>e.id===t.id))||void 0===i?void 0:i.show}).reduce((e,t)=>e+t.quantity,0))},[I,e]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.Z,{sx:{background:"#ECECEC",position:"relative"},children:[(0,n.jsxs)(l.Z,{direction:"row",sx:{background:"#C50023",height:"100px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0px 20px"},children:[(0,n.jsx)(o.Z,{children:(0,n.jsx)(p.Z,{sx:{color:"#ffffff",fontWeight:600},variant:"h5",children:"THỰC ĐƠN"})}),(0,n.jsx)(d.Z,{variant:"contained",color:"error",sx:{borderRadius:5,minWidth:"150px"},onClick:()=>A(""),children:(0,n.jsxs)(l.Z,{direction:"row",display:"flex",alignItems:"center",gap:"10px",children:[(0,n.jsx)(p.Z,{children:W(S)}),(0,n.jsx)(o.Z,{component:"img",width:"5",height:"5",src:"https://img.icons8.com/ios-glyphs/30/expand-arrow--v1.png",alt:"expand-arrow--v1",style:{filter:"invert(100%)"}})]})})]}),j&&(0,n.jsx)(o.Z,{sx:{p:"15px 10px 15px 10px"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,children:Array.from(new Set(e.map(e=>e.type))).map((t,i)=>{let r=e.find(e=>e.type===t);return r?(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsx)(o.Z,{sx:{background:"white",borderRadius:"16px "},onClick:t===S?H:()=>O(t),children:(0,n.jsxs)(l.Z,{display:"flex",alignItems:"center",sx:{pt:"20px"},children:[(0,n.jsx)(o.Z,{component:"img",src:r.path,sx:{maxWidth:"100px",maxHeight:"100px",p:"5px 0px 5px 0px",borderRadius:"16px"}}),(0,n.jsx)(p.Z,{sx:{fontWeight:700},children:W(t)})]})})},i):null})})}),f&&(0,n.jsx)(l.Z,{sx:{p:"16px 10px 16px 10px"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,children:y.sort((e,t)=>t.price-e.price).map((e,t)=>(0,n.jsx)(x.ZP,{item:!0,xs:6,onClick:()=>T(e.id),children:(0,n.jsx)(u.ZP,{sx:{justifyContent:"flex",flexDirection:"column",background:"white",borderRadius:"16px",height:"240px",border:k.includes(e.id)?"2px solid red":"none"},children:(0,n.jsxs)(l.Z,{direction:"column",alignItems:"center",sx:{pt:"20px"},children:[(0,n.jsx)(o.Z,{component:"img",alt:e.name,src:e.path,sx:{maxWidth:"120px",maxHeight:"120px",pb:"10px",borderRadius:"16px"}}),(0,n.jsx)(p.Z,{sx:{fontWeight:700},children:e.name}),(0,n.jsxs)(p.Z,{sx:{fontWeight:700},children:[e.price.toLocaleString("vi-VN"),"VNĐ"]})]})})},t))})}),i&&(0,n.jsx)(o.Z,{sx:{p:"16px 10px 16px 10px"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,children:e.filter(e=>0!==e.price&&!0===e.show).sort((e,t)=>t.price-e.price).map((e,t)=>(0,n.jsx)(x.ZP,{item:!0,xs:6,onClick:()=>T(e.id),children:(0,n.jsx)(u.ZP,{sx:{justifyContent:"flex",flexDirection:"column",background:"white",borderRadius:"16px",height:"260px",border:k.includes(e.id)?"2px solid red":"none"},children:(0,n.jsxs)(l.Z,{direction:"column",alignItems:"center",sx:{pt:"20px"},children:[(0,n.jsx)(o.Z,{component:"img",alt:e.name,src:e.path,sx:{maxWidth:"120px",maxHeight:"120px",pb:"10px",borderRadius:"16px"}}),(0,n.jsx)(p.Z,{sx:{fontWeight:700},children:e.name}),(0,n.jsxs)(p.Z,{sx:{fontWeight:700},children:[e.price.toLocaleString("vi-VN"),"VNĐ"]})]})})},t))})}),(0,n.jsxs)(o.Z,{sx:{position:"fixed",bottom:"30px",right:"15px"},children:[(0,n.jsx)(d.Z,{sx:{borderRadius:"100%"},onClick:()=>{_.push("/cus_service/cart?items&tableId=".concat(_.query.tableId))},children:(0,n.jsx)("img",{width:"50",height:"50",src:"https://img.icons8.com/fluency/48/shopping-cart.png",alt:"shopping-cart"})}),(0,n.jsx)(o.Z,{sx:{position:"absolute",bottom:"50%",right:"0px",backgroundColor:"red",color:"white",borderRadius:"50%",width:"25px",height:"25px",textAlign:"center",fontSize:"14px",lineHeight:"25px"},children:C})]})]})})}},1163:function(e,t,i){e.exports=i(3035)}},function(e){e.O(0,[16,474,945,787,886,993,888,774,179],function(){return e(e.s=6923)}),_N_E=e.O()}]);